<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="home.css">
    <style>
        .blink {
            animation: blinker 1s linear infinite;
        }

        @keyframes blinker {
        0% {
            opacity: 1;
            color: red;
            transform: rotate(0deg); /* Add rotation for horizontal display */
        }
        50% {
            opacity: 0;
            color: red;
        }
        100% {
            opacity: 1;
            color: red;
            transform: rotate(0deg); /* Add rotation for horizontal display */
        }
        }
    </style>
    <title>Chemical Factory Disaster Management</title>
</head>
<body>
    <header>
        <h1>Chemical Factory Disaster Management</h1>
    </header>

    <div class="bstauts">
        <div id="bh">
           <h1 id="risk">N<br>O<br>R<br>M<br>A<br>L</h1>
        </div>
        <div id="details">
            <p>Details :</p>
            <ul>
                <li> Temperature : In Control</li>
                <li> Electronics :- Working </li>
                <li>Emergency Alarm :- Working</li>
                <li>Moisture : In Control</li>
                <li>Humidity : In Control</li>
                <li>Emergency System: Working</li>
            </ul>
        </div>
    </div>
   <p> update</p>
    
    <section class="status-section">
        <div class="temp">
            <div class="thed">
            <h2 #id="thed">Temperature</h2>
            </div>
            <h2 id="temperature">
                <div id="message"></div>
                <script>
                    function playSiren() {
                        const sirenAudio = document.getElementById('siren');
                        sirenAudio.play();
                    }

                    fetch('http://localhost:8000/string_endpoint')
                        .then(response => response.text())
                        .then(data => {
                            const temperatureValue = parseFloat(data);
                            document.getElementById('message').innerText = data;

                            // Check if temperature is greater than 25%
                            if (temperatureValue > 25) {
                                document.getElementById('risk').innerText = 'RISK';
                                document.getElementById('risk').classList.add('blink'); // Add the blink class
                                document.getElementById('prbo').innerText = 'Problem';
                                document.getElementById('problem-details').innerText = 'Problem at the temperature section';

                                // Play the siren sound
                                playSiren();

                                // Send a message to the server
                                fetch('http://localhost:8000/send_message', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                    },
                                    body: JSON.stringify({ message: 'We are at risk' }),
                                })
                                .then(response => {
                                    if (response.ok) {
                                        console.log('Message sent successfully');
                                    } else {
                                        console.error('Failed to send message to the server');
                                    }
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                });
                            } else {
                                // Reset the risk section to normal when the temperature is within the acceptable range
                                document.getElementById('risk').innerText = 'NORMAL';
                                document.getElementById('risk').classList.remove('blink'); // Remove the blink class
                                document.getElementById('prbo').innerText = 'Problem';
                                document.getElementById('problem-details').innerText = 'Problem at the alarm system'; // Update the problem message
                            }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                        });
                </script>
            </h2>
            <h3>temp between 21% to 25%</h3>
            <p class="status normal">Normal</p>
        </div>
        <div class="ele">
            <div class="thed">
                <h2 #id="thed">Electronics</h2>
                </div>
            <p class="status normal">Normal</p>
            <h2>All Normal</h2>
            <h2>In All Section</h2>
        </div>
        <div class="ala">
            <div class="thed">
                <h2 #id="thed">Alarm System</h2>
                </div>
            <p class="status risk">Risk</p>
            <h2>Problem At</h2>
            <h2>Sector S2</h2>
        </div>
    </section>
    <hr>
    <h1 id="prbo">Problem</h1>
    <div class="pdetails">
        <p id="problem-details">No problems reported</p>
    </div>
    <hr>
    <div class="extra">
    <div class="tragedy">
        <h1>Previous disaster:</h1>
            <div class="more">
                <h3>Before Ludhiana Gas Leak this week, 5 industrial disasters that shocked India
                </h3>
               <img src="pt.jfif" alt="Description of the image" width="300" height="200">
               <p id="message-at-pt">Hundreds of people admitted to hospital and several dead after gas leak at southern Indian chemical plant</p>
            </div>
           
            <div class="pt">
                <a href="previoustragedy.html" class="login-button"><button>Read More</button></a>
            </div>
    </div>
    <div class="tragedy">
        <h1>Safety And Preventation:</h1>
            <div class="more">
                <h3>Before Ludhiana Gas Leak this week, 5 industrial disasters that shocked India
                </h3>
               <img src="SAP.png" alt="Description of the image" width="400" height="200">
               <p id="mssage-at-pt">Hundreds of people admitted to hospital and several dead after gas leak at southern Indian chemical plant</p>
            </div>
           
            <div class="pt">
                <a href="SAP.html" class="login-button"><button>Read More</button></a>
            </div>
    </div>
</div>
    <footer>
        <p>&copy; 2023 Chemical Factory Disaster Management</p>
    </footer>
</body>
</html>
